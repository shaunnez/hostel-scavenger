define(function(e){"use strict";var t=e("jquery"),n=e("utils/globals"),r=e("underscore"),i=e("backbone"),s=e("views/base"),o=e("text!tpl/menu.html"),u=r.template(o);return s.extend({events:{},initialize:function(e){this.events=r.extend({},s.prototype.events,this.events);this.hunt=e.hunt;this.render();this.runCountdown()},render:function(){this.$el.html(u());this.$title=this.$el.find("#header .title");this.$loader=this.$el.find(".loader");this.$menuBtns=this.$el.find("#menu-container .btn");return this},postRender:function(){},onClose:function(){this.stopCountdown()},runCountdown:function(){var e=this;this.state=this.handleTime();this.handleState(e.state);this.timeout=setTimeout(function(){e.runCountdown()},1e3)},stopCountdown:function(){clearTimeout(this.timeout)},handleTime:function(){var e=new Date,t=this.hunt.get("start")-e,n=this.hunt.get("end")-e;if(t>0){this.$title.text("Start in "+this.countdownTimer(t));return"pending"}if(n>=0){this.$title.text("Ends in "+this.countdownTimer(n));return"running"}this.$title.text("Hunt Finished");return"complete"},handleState:function(e){this.enableMenu();e=="running"?this.enableMenu():e!="pending"&&this.stopCountdown()},countdownTimer:function(e){var t=Math.floor(e/36e5),n=Math.floor(e%36e5/6e4),r=Math.floor(e%6e4/1e3);t=t<10?"0"+t:t;n=n<10?"0"+n:n;r=r<10?"0"+r:r;return t+":"+n+":"+r},disableMenu:function(){t.each(this.$menuBtns,function(e,n){var r=t(n);r.data("link",r.attr("href"));r.attr("href","javascript:;");r.addClass("disabled")})},enableMenu:function(){t.each(this.$menuBtns,function(e,n){var r=t(n);r.attr("href",r.data("link"));r.removeClass("disabled")})}})});