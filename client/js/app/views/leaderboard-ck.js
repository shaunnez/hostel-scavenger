define(function(e){"use strict";var t=e("jquery"),n=e("utils/globals"),r=e("underscore"),i=e("backbone"),s=e("views/base"),o=e("collections/leaders"),u=e("text!tpl/leaderboard.html"),a=e("text!tpl/leader.html"),f=r.template(a),l=r.template(u);return s.extend({events:{},initialize:function(e){this.events=r.extend({},s.prototype.events,this.events);this.leaders=new o;this.leaders.comparator=function(e,t){var n=0;return e.points()>t.points()?-1:e.points()<t.points()?1:0};this.fading=!1;this.render()},render:function(){this.$el.html(l());this.$tbody=this.$el.find("tbody");return this},postRender:function(){this.listenTo(this.leaders,"change",this.sortLeaders);this.listenTo(this.leaders,"sort",this.renderLeaders);this.leaders.length>1?this.sortLeaders():this.leaders.length==1&&this.renderLeaders()},sortLeaders:function(){this.leaders.sort()},renderLeaders:function(){var e=this,t="";for(var n=0,r=this.leaders.length;n<r;n++){var i=this.leaders.at(n);t+=f({leader:i})}clearTimeout(this.timeout);e.$tbody.fadeOut();this.timeout=setTimeout(function(){e.$tbody.html(t).fadeIn()},500)},onClose:function(){this.stopListening(this.leaders)}})});