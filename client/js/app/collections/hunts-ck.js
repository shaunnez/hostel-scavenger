define(function(e){"use strict";var t=e("jquery"),n=e("utils/globals"),r=e("backbone"),i=e("models/hunt");return r.Collection.extend({model:i,url:"http://hostelliving.getfreehosting.co.uk/json/get_page/?slug=options&callback=?",parse:function(e){if(e&&e.status=="ok"){var t=e.page.attachments,r={};for(var i=0,s=t.length;i<s;i++)r[t[i].id]=t[i].images;var o=e.page.custom_fields,u=[],a=parseInt(o.hunt);for(var i=0,s=a;i<s;i++){var f="hunt_"+i,l=o[f+"_hunt_name"][0],c=l.replace(/ /g,"").toLowerCase(),h=o[f+"_start"][0],p=o[f+"_end"][0],d=new Date;d.setHours(Number(h.split(":")[0]));d.setMinutes(Number(h.split(":")[1]));d.setSeconds(0);var v=new Date;v.setHours(Number(p.split(":")[0]));v.setMinutes(Number(p.split(":")[1]));v.setSeconds(0);var m=f+"_challenge",g=parseInt(o[m]),y=f+"_task",b=parseInt(o[y]),w=[],E=[];for(var S=0,x=g;S<x;S++){var T=m+"_"+S,N=o[T+"_name"][0],C=c+"_"+N.replace(/ /g,"").toLowerCase(),k=o[T+"_location"][0],L=k.split("|"),A={id:C.hashCode()+n.today(),name:N,description:o[T+"_description"][0],points:parseInt(o[T+"_points"][0]),validatedPoints:parseInt(o[T+"_validated_points"][0]),gpsRange:parseInt(o[T+"_gps_range"][0]),touristInformation:o[T+"_tourist_information"][0],latitude:L[1].split(",")[0],longitude:L[1].split(",")[1]};o[T+"_image"]&&(A.image=r[Number(o[T+"_image"][0])]);w.push(A)}for(var S=0,x=b;S<x;S++){var O=y+"_"+S,M=o[O+"_name"][0],_=c+"_"+M.replace(/ /g,"").toLowerCase(),D={id:_.hashCode()+n.today(),name:M,points:parseInt(o[O+"_points"][0]),validatedPoints:parseInt(o[O+"_validated_points"][0]),challengeName:o[O+"_challenge_name"][0]};E.push(D)}var P={id:c.hashCode(),name:l,start:d,end:v,challenges:w,tasks:E};u.push(P)}return u}return[]}})});