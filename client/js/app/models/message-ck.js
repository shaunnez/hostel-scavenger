define(function(e){"use strict";var t=e("jquery"),n=e("utils/globals"),r=e("backbone");return r.Model.extend({defaults:function(){return{date:(new Date).getTime(),today:n.today()}},initialize:function(e){this.firebase=new Firebase(n.FirebaseURL+"/messages/"+n.today())},formattedTime:function(){var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t=new Date(this.get("date")),n=t.getMonth(),r=t.getDate(),i=t.getHours(),s=t.getMinutes(),o=t.getSeconds();n=e[n];r=r<10?"0"+r:r;i=i<10?"0"+i:i;s=s<10?"0"+s:s;o=o<10?"0"+o:o;return n+" "+r+" at "+i+":"+s+":"+o},avatar:function(){return this.has("avatar")?this.get("avatar"):this.has("fbAvatar")?this.get("fbAvatar"):"/img/default-avatar.png"},username:function(){return(this.has("username")?this.get("username"):this.get("email")).split("@")[0]}})});